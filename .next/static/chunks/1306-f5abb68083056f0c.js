"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1306],{63192:(e,r,t)=>{t.d(r,{A:()=>g});var a=t(95155),o=t(5565),s=t(14085),i=t(35007),c=t(29602),n=t(61584),d=t(48173),l=t.n(d),u=t(12115),p=t(26039);let g=e=>{let{name:r,overview:t,price:d,image:g,slug:m,rating:f,size:h,color:v}=e,[y,w]=(0,u.useState)(!1),{addToCart:x}=(0,n._)();return(0,u.useEffect)(()=>{let e=()=>{w(window.innerWidth>=968)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.jsxs)(i.Zp,{className:"group relative overflow-hidden rounded-lg border w-[300px] h-[500px]",children:[(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"relative h-[300px]",children:(0,a.jsx)(o.default,{src:g,alt:r,fill:!0,className:"object-cover",sizes:"300px"})}),(0,a.jsxs)("div",{className:"p-4 flex flex-col flex-grow",children:[(0,a.jsx)("h3",{className:"font-semibold",children:r}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground flex-grow",children:t}),(0,a.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,a.jsx)("p",{className:"font-semibold",children:(0,c.$g)(d)}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 fill-yellow-400 text-yellow-400 mr-1"}),(0,a.jsx)("span",{children:f.toFixed(1)})]})]}),!y&&(0,a.jsxs)("div",{className:"flex gap-4 mt-4",children:[(0,a.jsx)(l(),{href:"/product/".concat(m),className:"w-3/4",children:(0,a.jsx)(s.$,{variant:"secondary",className:"w-3/4 bg-main hover:bg-[#fff3e3]/90",children:(0,a.jsx)("p",{className:"text-sub",children:"More details"})})}),(0,a.jsx)(s.$,{variant:"secondary",className:"w-3/4 bg-sub hover:bg-[#b88e2f]/90",onClick:()=>{console.log(h,v),x({productName:r,productId:m,productImage:g,productPrice:d,size:h,color:v})},children:(0,a.jsx)("p",{className:"text-white",children:"Add to cart"})})]})]})]}),y&&(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-4 bg-black/60 opacity-0 transition-opacity duration-200 group-hover:opacity-100",children:[(0,a.jsx)(l(),{href:"/product/".concat(m),className:"w-3/4",children:(0,a.jsx)(s.$,{variant:"secondary",className:"w-full bg-main hover:bg-[#fff3e3]/90",children:"More details"})}),(0,a.jsx)(s.$,{variant:"secondary",className:"w-3/4 bg-sub hover:bg-[#b88e2f]/90",onClick:()=>{console.log(h,v),x({productName:r,productId:m,productImage:g,productPrice:d,size:h,color:v})},children:"Add to cart"})]})]})}},14085:(e,r,t)=>{t.d(r,{$:()=>d,r:()=>n});var a=t(95155),o=t(12115),s=t(12317),i=t(31027),c=t(29602);let n=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=o.forwardRef((e,r)=>{let{className:t,variant:o,size:i,asChild:d=!1,...l}=e,u=d?s.DX:"button";return(0,a.jsx)(u,{className:(0,c.cn)(n({variant:o,size:i,className:t})),ref:r,...l})});d.displayName="Button"},35007:(e,r,t)=>{t.d(r,{BT:()=>d,Wu:()=>l,ZB:()=>n,Zp:()=>i,aR:()=>c,wL:()=>u});var a=t(95155),o=t(12115),s=t(29602);let i=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...o})});i.displayName="Card";let c=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...o})});c.displayName="CardHeader";let n=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("font-semibold leading-none tracking-tight",t),...o})});n.displayName="CardTitle";let d=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...o})});d.displayName="CardDescription";let l=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...o})});l.displayName="CardContent";let u=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...o})});u.displayName="CardFooter"},61584:(e,r,t)=>{t.d(r,{_:()=>l,default:()=>p});var a=t(95155),o=t(12115),s=t(20241),i=t(80839),c=t(35408);let n=(0,o.createContext)(void 0),d={quantity:1},l=()=>{let e=(0,o.useContext)(n);if(!e)throw Error("useCart must be used within a CartProvider");return e},u="cart",p=e=>{let{children:r}=e,{isLoggedIn:t,user:l}=(0,i.A)(),[p,g]=(0,o.useState)([]),[m,f]=(0,o.useState)(!1),{toast:h}=(0,s.dj)();return((0,o.useEffect)(()=>{if(!m)try{let e=localStorage.getItem(u);if(e){let r=JSON.parse(e);Array.isArray(r)&&g(r)}}catch(e){console.error("Error loading cart from localStorage:",e)}finally{f(!0)}},[]),(0,o.useEffect)(()=>{if(!m)return;let e=setTimeout(()=>{try{localStorage.setItem(u,JSON.stringify(p))}catch(e){console.error("Error saving cart to localStorage:",e),h({title:"Error saving cart",description:"Your cart changes might not persist after page refresh",variant:"destructive"})}t&&(null==l?void 0:l.userId)&&p.length>0&&(0,c.iH)(l.userId.toString(),p).catch(e=>{console.error("Error updating cart in backend:",e),h({title:"Error updating cart",description:"Failed to sync cart with server",variant:"destructive"})})},300);return()=>clearTimeout(e)},[p,m,t,null==l?void 0:l.userId]),(0,o.useEffect)(()=>{m&&t&&(null==l?void 0:l.userId)&&Array.isArray(l.cart)&&l.cart.length>0&&g(e=>{let r=new Map(e.map(e=>["".concat(e.productId,"-").concat(e.color,"-").concat(e.size),e])),t=[...e],a=!1;return l.cart.forEach(e=>{let o="".concat(e.productId,"-").concat(e.color,"-").concat(e.size),s=r.get(o);if(s){if(s.quantity!==e.quantity){let r=t.findIndex(r=>r.productId===e.productId&&r.color===e.color&&r.size===e.size);-1!==r&&(t[r]={...s,quantity:s.quantity+e.quantity},a=!0)}}else t.push(e),a=!0}),a?t:e})},[m,t,null==l?void 0:l.userId,null==l?void 0:l.cart]),m)?(0,a.jsx)(n.Provider,{value:{test:"test",cart:p,addToCart:e=>{try{if(!e.productId)throw Error("Product ID is required");g(r=>{let t=r.findIndex(r=>r.productId===e.productId&&r.color===e.color&&r.size===e.size);if(t>=0){let a=[...r];return a[t]={...a[t],quantity:a[t].quantity+(e.quantity||d.quantity)},a}{let t={...d,...e,productId:e.productId,productName:e.productName,productImage:e.productImage,productPrice:e.productPrice,size:e.size,color:e.color};return[...r,t]}}),h({title:"Item added to cart",description:"Item added to cart successfully",variant:"default",className:"bg-sub border-none"})}catch(e){console.error("Error adding item to cart:",e),h({title:"Error adding item to cart",description:"An error occurred while adding item to cart",variant:"destructive"})}},removeFromCart:e=>{try{g(r=>{let t=[...r];return t.splice(e,1),t}),h({title:"Item removed from cart",description:"Item removed from cart successfully",variant:"destructive"})}catch(e){console.error("Error removing item from cart:",e)}},updateQuantity:(e,r)=>{try{g(t=>t.map((t,a)=>e===a?{...t,quantity:Math.max(1,r)}:t)),h({title:"Quantity updated",description:"Quantity updated successfully",variant:"default",className:"bg-main border-none"})}catch(e){console.error("Error updating quantity:",e)}},updateOrderDetails:(e,r)=>{try{g(t=>t.map(t=>t.productId===e?{...t,...r}:t))}catch(e){console.error("Error updating order details:",e)}},clearCart:()=>{try{g([]),localStorage.removeItem(u)}catch(e){console.error("Error clearing cart:",e)}},clearCartUser:()=>{try{g([]),localStorage.removeItem(u),t&&l&&(0,c.iH)(l.userId.toString(),[])}catch(e){console.error("Error clearing cart:",e)}},getCartTotal:()=>p.reduce((e,r)=>e+r.quantity,0)},children:r}):null}},88023:(e,r,t)=>{t.d(r,{B:()=>n,default:()=>d});var a=t(95155),o=t(12115),s=t(18652),i=t(25572);let c=(0,o.createContext)(void 0),n=()=>{let e=(0,o.useContext)(c);if(!e)throw Error("useProduct must be used within a ProductProvider");return e},d=e=>{let{children:r}=e,[t,n]=(0,o.useState)([]),[d,l]=(0,o.useState)(null),[u,p]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{Promise.all([(0,s.Fo)(),(0,i.a)()]).then(e=>{let[r,t]=e;"error"in r?console.error(r.error):n(r),"error"in t?console.error(t.error):l(t)}).finally(()=>p(!0))},[]),u)?(0,a.jsx)(c.Provider,{value:{products:t,siteInfo:d},children:r}):null}},20241:(e,r,t)=>{t.d(r,{dj:()=>p});var a=t(12115);let o=0,s=new Map,i=e=>{if(s.has(e))return;let r=setTimeout(()=>{s.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,r)},c=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},n=[],d={toasts:[]};function l(e){d=c(d,e),n.forEach(e=>{e(d)})}function u(e){let{...r}=e,t=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>l({type:"DISMISS_TOAST",toastId:t});return l({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function p(){let[e,r]=a.useState(d);return a.useEffect(()=>(n.push(r),()=>{let e=n.indexOf(r);e>-1&&n.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},34078:(e,r,t)=>{t.d(r,{Q7:()=>s,Sq:()=>l,Uj:()=>o,Xt:()=>c,i7:()=>n,lj:()=>d,rF:()=>i,vS:()=>u});var a=t(46820);let o=async()=>{try{let e=await a.A.get("api/image/routes.php");return console.log("Backend Response:",e.data),e.data.data.map(e=>({imageId:e.imageId,src:e.src}))}catch(e){return console.log("Error fetching images:",e),{error:"Error fetching images"}}},s=async e=>{try{let r=await a.A.get("api/image/routes.php?slug=".concat(e,"&type=product"));return console.log("Backend Response:",r.data),r.data.data}catch(e){return console.log("Error fetching image:",e),{error:"Error fetching image"}}},i=async e=>{try{let r=await a.A.get("api/image/routes.php?blogId=".concat(e,"&type=blog"));return console.log("Backend Response:",r.data),r.data.data}catch(e){return console.log("Error fetching image:",e),{error:"Error fetching image"}}},c=async(e,r)=>{try{let t=await a.A.post("api/image/routes.php?slug=".concat(e,"&type=product"),r);return console.log("Backend Response:",t.data),t.data}catch(e){return console.log("Error creating image:",e),{error:"Error creating image"}}},n=async(e,r)=>{try{let t=await a.A.post("api/image/routes.php?slug=".concat(e,"&type=blog"),r);return console.log("Backend Response:",t.data),t.data}catch(e){return console.log("Error creating image:",e),{error:"Error creating image"}}},d=async e=>{try{let r=await a.A.post("api/image/routes.php?type=about",e);return console.log("Backend Response:",r.data),r.data}catch(e){return console.log("Error creating image:",e),{error:"Error creating image"}}},l=async e=>{try{let r=await a.A.put("api/image/routes.php?type=imageId",e);return console.log("Backend Response:",r.data),r.data}catch(e){return console.log("Error updating image:",e),{error:"Error updating image"}}},u=async e=>{try{let r=await a.A.delete("api/image/routes.php?imageId=".concat(e));return console.log("Backend Response:",r.data),r.data}catch(e){return console.log("Error deleting image:",e),{error:"Error deleting image"}}}},18652:(e,r,t)=>{t.d(r,{Fo:()=>c,M$:()=>i,WY:()=>n,vc:()=>d});var a=t(46820),o=t(34078),s=t(22949);let i=async e=>{try{let{productId:r,short_description:t,full_description:i,tags:c,size:n,color:d,price:l,full_description_original:u,...p}=(await a.A.get("api/product/routes.php?slug=".concat(e))).data.data,g=await (0,o.Q7)(e);if("error"in g)return{error:g.error};let m=await (0,s.Xr)(e);return{...p,price:Number(l),slug:r,overview:t,description:i,images:g,reviews:m,tags:JSON.parse(c),size:JSON.parse(n),color:JSON.parse(d),descriptionOriginal:u}}catch(e){return console.log("Error fetching product:",e),{error:"Error fetching product"}}},c=async()=>{try{let e=(await a.A.get("api/product/routes.php")).data.data;return await Promise.all(e.map(async e=>{let{productId:r,short_description:t,full_description:a,size:i,color:c,full_description_original:n,tags:d,...l}=e,u=await (0,o.Q7)(r);if("error"in u)return{error:u.error};let p=await (0,s.Xr)(r);return{...l,tags:JSON.parse(d),size:JSON.parse(i),color:JSON.parse(c),slug:r,overview:t,description:a,images:u,reviews:p,descriptionOriginal:n}}))}catch(e){return console.log("Error fetching products:",e),{error:"Error fetching products"}}},n=async e=>{try{return{message:(await a.A.post("api/product/routes.php",{productId:e.slug,name:e.name,price:e.price,shortDescription:e.overview,fullDescription:e.description,size:e.size,color:e.color,tags:e.tags,fullDescriptionOriginal:e.descriptionOriginal})).data.message}}catch(e){return console.log("Error creating product:",e),{error:"Error creating product"}}},d=async(e,r)=>{try{return console.log("Updating product:",r),{message:(await a.A.put("api/product/routes.php?slug=".concat(e),{name:r.name,price:r.price,shortDescription:r.overview,fullDescription:r.description,size:r.size,color:r.color,tags:r.tags,fullDescriptionOriginal:r.descriptionOriginal})).data.message}}catch(e){return console.log("Error updating product:",e),{error:"Error updating product"}}}},22949:(e,r,t)=>{t.d(r,{Wr:()=>c,Xr:()=>s,bx:()=>i,zu:()=>o});var a=t(46820);let o=async()=>{try{let e=await a.A.get("api/review/routes.php");return console.log("Backend Response:",e.data),e.data.data.map(e=>({reviewId:e.reviewId,productId:e.productId,reviewer:e.reviewer,rating:Number(e.rating),comment:e.content,date:e.createdAt,userId:e.userId}))}catch(e){return console.log("Error fetching reviews:",e),{error:"Error fetching reviews"}}},s=async e=>{try{let r=await a.A.get("api/review/routes.php?productId=".concat(e));return console.log("Backend Response:",r.data),"success"==r.data.status?r.data.data.map(e=>({reviewId:e.reviewId,productId:e.productId,reviewer:e.reviewer,rating:Number(e.rating),comment:e.content,date:e.createdAt,userId:e.userId})):[]}catch(e){return console.log("Error fetching reviews:",e),{error:"Error fetching reviews"}}},i=async e=>{try{console.log("Data:",e);let r=await a.A.post("api/review/routes.php",e);return console.log("Backend Response:",r.data),{message:r.data.message}}catch(e){return console.log("Error creating review:",e),{error:"Error creating review"}}},c=async e=>{try{let r=await a.A.delete("api/review/routes.php?reviewId=".concat(e));return console.log("Backend Response:",r.data),{message:r.data.message}}catch(e){return console.log("Error deleting review:",e),{error:"Error deleting review"}}}},25572:(e,r,t)=>{t.d(r,{a:()=>o,v:()=>s});var a=t(46820);let o=async()=>{try{let e=await a.A.get("api/siteInfo/routes.php");console.log("Backend Response:",e.data.data);let{about:r,about_original:t,address:o,email:s,phone_number:i}=e.data.data;return{about:r,aboutOriginal:t,address:o,email:s,phoneNumber:i}}catch(e){return console.log("Error fetching site info:",e),{error:"Error fetching site info"}}},s=async e=>{try{let r=await a.A.put("api/siteInfo/routes.php",e);return console.log("Backend Response:",r.data),{message:r.data.message}}catch(e){return console.log("Error updating site info:",e),{error:"Error updating site info"}}}}}]);