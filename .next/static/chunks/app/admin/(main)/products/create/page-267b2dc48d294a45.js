(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4953],{59979:(e,r,t)=>{Promise.resolve().then(t.bind(t,22071))},22071:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>C});var a=t(95155),l=t(12115),s=t(69606),i=t(85060),c=t(14085),o=t(9955),n=t(10371),d=t(34839),u=t(7837),p=t(3392),g=t(41093),m=t(56378),h=t(97217),x=t(29602),f=t(20241),v=t(34276),j=t(82308),w=t(18652),b=t(34078),y=t(33326),N=t(65494),E=t(76046),I=t(5565);function C(){let[e,r]=(0,l.useState)([]),[t,C]=(0,l.useState)([]),[R,z]=(0,l.useState)([]),[D,k]=(0,l.useState)(""),[S,A]=(0,l.useState)(!1),{toast:O}=(0,f.dj)(),B=(0,E.useRouter)(),P=(0,s.mN)({resolver:(0,i.u)(y.HU),defaultValues:{productId:"",name:"",price:0,size:[],color:[],shortDescription:"",fullDescription:"",tags:[]}}),M=async e=>{try{if(A(!0),0===t.length){O({title:"Error",description:"Please upload at least one product image",variant:"destructive"}),A(!1);return}let r=(await Promise.all(t.map(async e=>{try{console.log("Starting upload for image: ".concat(e.alt));let r=await (0,x.cV)(e.file);if("string"==typeof r)return console.log("Successfully uploaded image: ".concat(e.alt)),{alt:e.alt,src:r};return console.log("Error uploading image:",e.alt),O({title:"Error",description:"Error uploading image: ".concat(e.alt),variant:"destructive"}),A(!1),null}catch(r){return console.log('Error uploading image "'.concat(e.alt,'":'),r),O({title:"Error",description:'Failed to upload image "'.concat(e.alt,'"'),variant:"destructive"}),A(!1),null}}))).filter(e=>null!==e);if(r.length!==t.length){O({title:"Error",description:"Failed to upload all images",variant:"destructive"}),A(!1);return}let a=(await Promise.all(R.map(async e=>{try{console.log("Starting upload for image: ".concat(e.alt));let r=await (0,x.cV)(e.file);if("string"==typeof r)return console.log("Successfully uploaded image: ".concat(e.alt)),{alt:e.alt,src:r};return console.log("Error uploading image:",e.alt),O({title:"Error",description:"Error uploading image: ".concat(e.alt),variant:"destructive"}),A(!1),null}catch(r){return console.error('Error uploading image "'.concat(e.alt,'":'),r),O({title:"Error",description:'Failed to upload image "'.concat(e.alt,'"'),variant:"destructive"}),A(!1),null}}))).filter(e=>null!==e);if(a.length!==R.length){O({title:"Error",description:"Failed to upload all images",variant:"destructive"}),A(!1);return}let l=e.fullDescription;l=l.replace(/IMG<([^,]+)(?:,\s*(\d+))?(?:,\s*(\d+))?>/g,(e,r,t,l)=>{let s=a.find(e=>e.alt===r);return s?"IMG<".concat(r,",").concat(s.src).concat(t?",".concat(t):"").concat(l?",".concat(l):"",">"):(O({title:"Error",description:'Image with alt "'.concat(r,'" not found'),variant:"destructive"}),e)});let s=(0,x.QH)(l);console.log({...e,images:r,fullDescription:s}),console.log("Uploaded Images:",r),console.log("Description Images:",a);let{productId:i,shortDescription:c,fullDescription:o,...n}=e;console.log("Product Data:",{...n}),await (0,w.WY)({...n,slug:i,overview:c,description:s,descriptionOriginal:e.fullDescription}).then(e=>{if("error"in e){O({title:"Error",description:"Failed to create product",variant:"destructive"}),A(!1);return}O({title:"Success",description:"Product created successfully",variant:"default"})}).then(()=>{r.forEach(async r=>{await (0,b.Xt)(e.productId,{src:r.src,imageId:r.alt,type:"product"}).then(e=>{if("error"in e){O({title:"Error",description:"Failed to create product image",variant:"destructive"}),A(!1);return}})}),a.forEach(async r=>{await (0,b.Xt)(e.productId,{src:r.src,imageId:r.alt,type:"description"}).then(e=>{if("error"in e){O({title:"Error",description:"Failed to create description image",variant:"destructive"}),A(!1);return}})})}).finally(()=>{B.push("/admin/products"),A(!1)})}catch(e){console.error(e),O({title:"Error",description:"Failed to create product",variant:"destructive"})}};return(0,a.jsxs)("div",{className:"container mx-auto py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Create New Product"}),(0,a.jsx)(d.lV,{...P,children:(0,a.jsxs)("form",{onSubmit:P.handleSubmit(M),className:"space-y-8",children:[(0,a.jsxs)("div",{className:" w-full flex max-md:flex-col justify-between space-x-10 items-start",children:[(0,a.jsxs)("div",{className:"flex w-full flex-grow flex-col justify-start items-start space-y-6",children:[(0,a.jsx)(d.zB,{control:P.control,name:"productId",render:e=>{let{field:r}=e;return(0,a.jsxs)(d.eI,{className:"w-full flex-1",children:[(0,a.jsx)(d.lR,{children:"Product ID"}),(0,a.jsx)(d.MJ,{children:(0,a.jsx)(o.p,{...r})}),(0,a.jsx)(d.Rr,{children:"Enter a unique identifier for the product."}),(0,a.jsx)(d.C5,{})]})}}),(0,a.jsx)(d.zB,{control:P.control,name:"name",render:e=>{let{field:r}=e;return(0,a.jsxs)(d.eI,{className:"w-full flex-1",children:[(0,a.jsx)(d.lR,{children:"Product Name"}),(0,a.jsx)(d.MJ,{children:(0,a.jsx)(o.p,{...r})}),(0,a.jsx)(d.Rr,{children:"Enter the name of the product."}),(0,a.jsx)(d.C5,{})]})}}),(0,a.jsx)(d.zB,{control:P.control,name:"price",render:e=>{let{field:r}=e;return(0,a.jsxs)(d.eI,{className:"w-full flex-1",children:[(0,a.jsx)(d.lR,{children:"Price"}),(0,a.jsx)(d.MJ,{children:(0,a.jsx)(o.p,{type:"number",...r,onChange:e=>r.onChange(parseFloat(e.target.value))})}),(0,a.jsx)(d.Rr,{children:"Enter the price of the product."}),(0,a.jsx)(d.C5,{})]})}}),(0,a.jsx)(d.zB,{control:P.control,name:"size",render:e=>{let{field:r}=e;return(0,a.jsxs)(d.eI,{className:"w-full flex-1",children:[(0,a.jsx)(d.lR,{children:"Sizes"}),(0,a.jsx)(v.$,{name:"size",items:N.GX,control:P.control,isEditing:!0}),(0,a.jsx)(d.Rr,{children:"Select available sizes for the product."}),(0,a.jsx)(d.C5,{})]})}}),(0,a.jsx)(d.zB,{control:P.control,name:"color",render:e=>{let{field:r}=e;return(0,a.jsxs)(d.eI,{className:"w-full flex-1",children:[(0,a.jsx)(d.lR,{children:"Colors"}),(0,a.jsx)(v.$,{name:"color",items:N.ih,control:P.control,isEditing:!0}),(0,a.jsx)(d.Rr,{children:"Select available colors for the product."}),(0,a.jsx)(d.C5,{})]})}}),(0,a.jsx)(j.k,{}),(0,a.jsx)(d.zB,{control:P.control,name:"shortDescription",render:e=>{let{field:r}=e;return(0,a.jsxs)(d.eI,{className:"w-full flex-1",children:[(0,a.jsx)(d.lR,{children:"Short Description"}),(0,a.jsx)(d.MJ,{children:(0,a.jsx)(n.T,{...r})}),(0,a.jsx)(d.Rr,{children:"Enter a brief description of the product."}),(0,a.jsx)(d.C5,{})]})}})]}),(0,a.jsxs)("div",{className:"lg:w-[500px]",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Product Images"}),(0,a.jsx)(m.A,{uploadedImages:t,onUpload:e=>{let r=URL.createObjectURL(e),t=e.name.split(".").slice(0,-1).join(".");C(a=>[...a,{alt:t,src:r,file:e}])},onDelete:e=>{C(r=>{let t=r.filter(r=>r.src!==e);return URL.revokeObjectURL(e),t})},onUpdateAlt:(e,r)=>{C(t=>t.map(t=>t.alt===e?{...t,alt:r}:t))},isEditing:!0})]})]}),(0,a.jsxs)("div",{className:"flex w-full justify-between space-x-10 items-start",children:[(0,a.jsx)(d.zB,{control:P.control,name:"fullDescription",render:e=>{let{field:r}=e;return(0,a.jsxs)(d.eI,{className:"w-full",children:[(0,a.jsxs)(d.lR,{className:"w-full flex justify-between items-center",children:[(0,a.jsx)("p",{children:"Full description"}),(0,a.jsxs)(u.lG,{children:[(0,a.jsx)(u.zM,{children:(0,a.jsx)("p",{className:"hover:underline",children:"Help"})}),(0,a.jsxs)(u.Cf,{className:"max-w-4xl max-h-[80vh]",children:[(0,a.jsx)(u.c7,{children:(0,a.jsx)(u.L3,{children:"Image Description guideline Guideline"})}),(0,a.jsx)(I.default,{src:"/images/guidline.png",alt:"guidline",width:800,height:600})]})]})]}),(0,a.jsx)(d.MJ,{children:(0,a.jsx)(n.T,{...r,className:"min-h-[300px]"})}),(0,a.jsx)(d.Rr,{children:"Enter a detailed description of the product."}),(0,a.jsx)(d.C5,{})]})}}),(0,a.jsxs)("div",{className:"flex flex-col justify-start items-start space-y-6 lg:w-[500px]",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Description Images"}),(0,a.jsx)(m.A,{uploadedImages:R,onUpload:e=>{let r=URL.createObjectURL(e),t=e.name.split(".").slice(0,-1).join(".");z(a=>[...a,{alt:t,src:r,file:e}])},onDelete:e=>{z(r=>{let t=r.filter(r=>r.src!==e);return URL.revokeObjectURL(e),t})},onUpdateAlt:(e,r)=>{z(t=>t.map(t=>t.alt===e?{...t,alt:r}:t))},isEditing:!0})]}),(0,a.jsxs)(u.lG,{children:[(0,a.jsx)(u.zM,{asChild:!0,children:(0,a.jsx)(c.$,{onClick:()=>{let e=P.getValues("fullDescription");e=e.replace(/IMG<([^,]+)(?:,\s*(\d+))?(?:,\s*(\d+))?>/g,(e,r,t,a)=>{let l=R.find(e=>e.alt===r);return l?"IMG<".concat(r,",").concat(l.src).concat(t?",".concat(t):"").concat(a?",".concat(a):"",">"):(O({title:"Error",description:'Image with alt "'.concat(r,'" not found'),variant:"destructive"}),e)}),k((0,x.QH)(e))},className:"w-full",children:"Preview"})}),(0,a.jsxs)(u.Cf,{className:"max-w-4xl max-h-[80vh]",children:[(0,a.jsx)(u.c7,{children:(0,a.jsx)(u.L3,{children:"Product Description Preview"})}),(0,a.jsx)(p.F,{className:"h-full max-h-[calc(80vh-4rem)]",children:(0,a.jsx)(h.A,{content:D})})]})]})]})]}),(0,a.jsx)(d.zB,{control:P.control,name:"tags",render:t=>{let{field:l}=t;return(0,a.jsxs)(d.eI,{children:[(0,a.jsx)(d.lR,{children:"Tags"}),(0,a.jsx)(d.MJ,{children:(0,a.jsx)(g.A,{tags:e,setTags:e=>{r(e),l.onChange(e)},isEditing:!0})}),(0,a.jsx)(d.Rr,{children:"Add tags to categorize the product."}),(0,a.jsx)(d.C5,{})]})}}),(0,a.jsx)(c.$,{type:"submit",className:"".concat(S?"bg-[#030391]/20 cursor-not-allowed hover:bg-[#030391]/20 active:bg-[#030391]/20":"bg-sub hover:bg-main/90 active:bg-main/95"," w-full relative"),children:S?(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-gray-900"})}):"Create Product"})]})})]})}},82308:(e,r,t)=>{"use strict";t.d(r,{O:()=>l,k:()=>s});var a=t(95155);t(12115);let l={black:"rgb(0, 0, 0)",yellow:"rgb(255, 255, 0)",violet:"rgb(138, 43, 226)",blue:"rgb(0, 0, 255)",green:"rgb(0, 128, 0)"},s=()=>(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Color Mapping"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:Object.entries(l).map(e=>{let[r,t]=e;return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:t}}),(0,a.jsx)("span",{className:"capitalize",children:r}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:t})]},r)})})]})},41093:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var a=t(95155),l=t(12115),s=t(9955),i=t(14085),c=t(39286),o=t(689);function n(e){let{tags:r,setTags:t,isEditing:n=!1}=e,[d,u]=(0,l.useState)(""),p=()=>{""===d.trim()||r.includes(d.trim())||(t([...r,d.trim()]),u(""))},g=e=>{t(r.filter(r=>r!==e))};return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(s.p,{value:d,onChange:e=>u(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),p())},placeholder:"Add a tag",disabled:!n}),n&&(0,a.jsx)(i.$,{onClick:e=>{e.preventDefault(),p()},children:"Add"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map(e=>(0,a.jsxs)(c.E,{variant:"secondary",className:"text-sm",children:[e,n&&(0,a.jsx)(i.$,{variant:"ghost",size:"sm",className:"ml-2 h-4 w-4 p-0",onClick:()=>g(e),children:(0,a.jsx)(o.A,{className:"h-3 w-3"})})]},e))})]})}},34276:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var a=t(95155),l=t(12115),s=t(86352),i=t(27193),c=t(29602);let o=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)(s.bL,{ref:r,className:(0,c.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...l,children:(0,a.jsx)(s.C1,{className:(0,c.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})})});o.displayName=s.bL.displayName;var n=t(34839);function d(e){let{name:r,items:t,control:l,isEditing:s=!1}=e;return(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:t.map(e=>(0,a.jsx)(n.zB,{control:l,name:r,render:r=>{var t;let{field:l}=r;return(0,a.jsxs)(n.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,a.jsx)(n.MJ,{children:(0,a.jsx)(o,{checked:null===(t=l.value)||void 0===t?void 0:t.includes(e.id),onCheckedChange:r=>{var t;return r?l.onChange([...l.value,e.id]):l.onChange(null===(t=l.value)||void 0===t?void 0:t.filter(r=>r!==e.id))},disabled:!s})}),(0,a.jsx)(n.lR,{className:"font-normal",children:e.label})]},e.id)}},e.id))})}},39286:(e,r,t)=>{"use strict";t.d(r,{E:()=>c});var a=t(95155);t(12115);var l=t(31027),s=t(29602);let i=(0,l.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:r,variant:t,...l}=e;return(0,a.jsx)("div",{className:(0,s.cn)(i({variant:t}),r),...l})}},65494:(e,r,t)=>{"use strict";t.d(r,{GX:()=>l,Tq:()=>i,ih:()=>s,yJ:()=>a});let a=[{title:"Home",url:"/"},{title:"Shop",url:"/shop"},{title:"About",url:"/about"},{title:"Contact",url:"/contact"},{title:"Blog",url:"/blog"}],l=[{id:"compact",label:"Compact"},{id:"standard",label:"Standard"},{id:"large",label:"Large"},{id:"oversized",label:"Oversized"}],s=[{id:"black",label:"Black"},{id:"yellow",label:"Yellow"},{id:"violet",label:"Violet"},{id:"blue",label:"Blue"},{id:"green",label:"Green"}],i=[{title:"Dining",src:"/images/categories/categories-1.png",alt:"dining"},{title:"Living",src:"/images/categories/categories-2.png",alt:"living"},{title:"Bedroom",src:"/images/categories/categories-3.png",alt:"bedroom"}]},18652:(e,r,t)=>{"use strict";t.d(r,{Fo:()=>c,M$:()=>i,WY:()=>o,vc:()=>n});var a=t(46820),l=t(34078),s=t(22949);let i=async e=>{try{let{productId:r,short_description:t,full_description:i,tags:c,size:o,color:n,price:d,full_description_original:u,...p}=(await a.A.get("api/product/routes.php?slug=".concat(e))).data.data,g=await (0,l.Q7)(e);if("error"in g)return{error:g.error};let m=await (0,s.Xr)(e);return{...p,price:Number(d),slug:r,overview:t,description:i,images:g,reviews:m,tags:JSON.parse(c),size:JSON.parse(o),color:JSON.parse(n),descriptionOriginal:u}}catch(e){return console.log("Error fetching product:",e),{error:"Error fetching product"}}},c=async()=>{try{let e=(await a.A.get("api/product/routes.php")).data.data;return await Promise.all(e.map(async e=>{let{productId:r,short_description:t,full_description:a,size:i,color:c,full_description_original:o,tags:n,...d}=e,u=await (0,l.Q7)(r);if("error"in u)return{error:u.error};let p=await (0,s.Xr)(r);return{...d,tags:JSON.parse(n),size:JSON.parse(i),color:JSON.parse(c),slug:r,overview:t,description:a,images:u,reviews:p,descriptionOriginal:o}}))}catch(e){return console.log("Error fetching products:",e),{error:"Error fetching products"}}},o=async e=>{try{return{message:(await a.A.post("api/product/routes.php",{productId:e.slug,name:e.name,price:e.price,shortDescription:e.overview,fullDescription:e.description,size:e.size,color:e.color,tags:e.tags,fullDescriptionOriginal:e.descriptionOriginal})).data.message}}catch(e){return console.log("Error creating product:",e),{error:"Error creating product"}}},n=async(e,r)=>{try{return console.log("Updating product:",r),{message:(await a.A.put("api/product/routes.php?slug=".concat(e),{name:r.name,price:r.price,shortDescription:r.overview,fullDescription:r.description,size:r.size,color:r.color,tags:r.tags,fullDescriptionOriginal:r.descriptionOriginal})).data.message}}catch(e){return console.log("Error updating product:",e),{error:"Error updating product"}}}},22949:(e,r,t)=>{"use strict";t.d(r,{Wr:()=>c,Xr:()=>s,bx:()=>i,zu:()=>l});var a=t(46820);let l=async()=>{try{let e=await a.A.get("api/review/routes.php");return console.log("Backend Response:",e.data),e.data.data.map(e=>({reviewId:e.reviewId,productId:e.productId,reviewer:e.reviewer,rating:Number(e.rating),comment:e.content,date:e.createdAt,userId:e.userId}))}catch(e){return console.log("Error fetching reviews:",e),{error:"Error fetching reviews"}}},s=async e=>{try{let r=await a.A.get("api/review/routes.php?productId=".concat(e));return console.log("Backend Response:",r.data),"success"==r.data.status?r.data.data.map(e=>({reviewId:e.reviewId,productId:e.productId,reviewer:e.reviewer,rating:Number(e.rating),comment:e.content,date:e.createdAt,userId:e.userId})):[]}catch(e){return console.log("Error fetching reviews:",e),{error:"Error fetching reviews"}}},i=async e=>{try{console.log("Data:",e);let r=await a.A.post("api/review/routes.php",e);return console.log("Backend Response:",r.data),{message:r.data.message}}catch(e){return console.log("Error creating review:",e),{error:"Error creating review"}}},c=async e=>{try{let r=await a.A.delete("api/review/routes.php?reviewId=".concat(e));return console.log("Backend Response:",r.data),{message:r.data.message}}catch(e){return console.log("Error deleting review:",e),{error:"Error deleting review"}}}}},e=>{var r=r=>e(e.s=r);e.O(0,[2651,1345,1359,1080,914,7518,8979,1868,1953,4548,8441,1517,7358],()=>r(59979)),_N_E=e.O()}]);