(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1673],{39520:(e,t,a)=>{Promise.resolve().then(a.bind(a,84311))},46820:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=a(82651).A.create({baseURL:"http://localhost:5050",withCredentials:!0})},84311:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a(95155),l=a(12115),s=a(70874),n=a(58441),i=a(9955),c=a(50745),d=a(14085),o=a(35007),u=a(29602),m=a(81453);function g(e){let{title:t,value:a}=e;return(0,r.jsxs)(o.Zp,{children:[(0,r.jsx)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,r.jsx)(o.ZB,{className:"text-sm font-medium",children:t})}),(0,r.jsx)(o.Wu,{children:(0,r.jsx)("div",{className:"text-lg font-bold",children:a})})]})}let p=()=>{let[e,t]=(0,l.useState)([]),[a,o]=(0,l.useState)([]),[p,f]=(0,l.useState)(1),[h,x]=(0,l.useState)("all"),[y,j]=(0,l.useState)("createdAt"),[w,b]=(0,l.useState)("desc"),[v,N]=(0,l.useState)("");(0,l.useEffect)(()=>{(0,s.Vd)().then(e=>{"error"in e?console.log(e.error):(o(e),t(e))})},[]),(0,l.useEffect)(()=>{let t=[...e];"all"!==h&&(t=t.filter(e=>e.status===h)),v&&(t=t.filter(e=>e.orderId.toLowerCase().includes(v.toLowerCase()))),t.sort((e,t)=>"orderId"===y?"asc"===w?e.orderId>t.orderId?1:-1:t.orderId>e.orderId?1:-1:"status"===y?"asc"===w?e.status.localeCompare(t.status):t.status.localeCompare(e.status):"asc"===w?new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime():new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),o(t),f(1)},[e,h,y,w,v]);let D=e.reduce((e,t)=>e+t.total,0),A=e.length,C=e.filter(e=>"completed"===e.status).length,I=e.filter(e=>"pending"===e.status).length,S=e.filter(e=>"cancelled"===e.status).length,k=Math.ceil(a.length/6),P=a.slice((p-1)*6,6*p),L=async(e,a)=>{await (0,s.Kv)(e,a).then(r=>{"error"in r?console.error("Error updating order status:",r.error):(console.log("Order status updated:",r.message),t(t=>t.map(t=>t.orderId===e?{...t,status:a}:t)))})};return(0,r.jsxs)("div",{className:"w-full space-y-6 my-6 pr-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsx)(g,{title:"Total Amount",value:(0,u.$g)(D)}),(0,r.jsx)(g,{title:"Total Orders",value:A.toString()}),(0,r.jsx)(g,{title:"Order Status",value:"".concat(C," completed, ").concat(I," pending, ").concat(S," cancelled")})]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsx)(i.p,{placeholder:"Search by Order ID",value:v,onChange:e=>N(e.target.value),className:"md:w-1/3"}),(0,r.jsxs)(c.l6,{value:h,onValueChange:x,children:[(0,r.jsx)(c.bq,{className:"md:w-1/4",children:(0,r.jsx)(c.yv,{placeholder:"Filter by Status"})}),(0,r.jsxs)(c.gC,{children:[(0,r.jsx)(c.eb,{value:"all",children:"All Statuses"}),(0,r.jsx)(c.eb,{value:"completed",children:"Completed"}),(0,r.jsx)(c.eb,{value:"pending",children:"Pending"}),(0,r.jsx)(c.eb,{value:"cancelled",children:"Cancelled"})]})]}),(0,r.jsxs)(c.l6,{value:y,onValueChange:j,children:[(0,r.jsx)(c.bq,{className:"md:w-1/4",children:(0,r.jsx)(c.yv,{placeholder:"Sort by"})}),(0,r.jsxs)(c.gC,{children:[(0,r.jsx)(c.eb,{value:"createdAt",children:"Date"}),(0,r.jsx)(c.eb,{value:"orderId",children:"Order ID"}),(0,r.jsx)(c.eb,{value:"status",children:"Status"})]})]}),(0,r.jsx)(d.$,{variant:"outline",onClick:()=>b("asc"===w?"desc":"asc"),children:"asc"===w?"Ascending":"Descending"})]}),(0,r.jsx)("div",{className:"grid sm:grid-cols-1 lg:grid-cols-2 items-start justify-start gap-4",children:P.map(e=>(0,r.jsx)(n.A,{order:e,admin:!0,onCancel:()=>L(e.orderId,"cancelled"),onComplete:()=>L(e.orderId,"completed")},e.orderId))}),(0,r.jsx)(m.dK,{children:(0,r.jsxs)(m.Iu,{children:[(0,r.jsx)(m.cU,{children:(0,r.jsx)(m.Eb,{onClick:()=>f(e=>Math.max(e-1,1)),isActive:1!==p})}),[...Array(k)].map((e,t)=>(0,r.jsx)(m.cU,{children:(0,r.jsx)(m.n$,{onClick:()=>f(t+1),isActive:p===t+1,children:t+1})},t)),(0,r.jsx)(m.cU,{children:(0,r.jsx)(m.WA,{onClick:()=>f(e=>Math.min(e+1,k)),isActive:p!==k})})]})})]})}},9955:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var r=a(95155),l=a(12115),s=a(29602);let n=l.forwardRef((e,t)=>{let{className:a,type:l,...n}=e;return(0,r.jsx)("input",{type:l,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},81453:(e,t,a)=>{"use strict";a.d(t,{Eb:()=>g,Iu:()=>o,WA:()=>p,cU:()=>u,dK:()=>d,n$:()=>m});var r=a(95155),l=a(12115),s=a(25012),n=a(15325),i=(a(80368),a(29602)),c=a(14085);let d=e=>{let{className:t,...a}=e;return(0,r.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,i.cn)("mx-auto flex w-full justify-center",t),...a})};d.displayName="Pagination";let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("ul",{ref:t,className:(0,i.cn)("flex flex-row items-center gap-1",a),...l})});o.displayName="PaginationContent";let u=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("li",{ref:t,className:(0,i.cn)("",a),...l})});u.displayName="PaginationItem";let m=e=>{let{className:t,isActive:a,size:l="icon",...s}=e;return(0,r.jsx)("a",{"aria-current":a?"page":void 0,className:(0,i.cn)((0,c.r)({variant:a?"outline":"ghost",size:l}),t),...s})};m.displayName="PaginationLink";let g=e=>{let{className:t,...a}=e;return(0,r.jsxs)(m,{"aria-label":"Go to previous page",size:"default",className:(0,i.cn)("gap-1 pl-2.5",t),...a,children:[(0,r.jsx)(s.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Previous"})]})};g.displayName="PaginationPrevious";let p=e=>{let{className:t,...a}=e;return(0,r.jsxs)(m,{"aria-label":"Go to next page",size:"default",className:(0,i.cn)("gap-1 pr-2.5",t),...a,children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(n.A,{className:"h-4 w-4"})]})};p.displayName="PaginationNext"},50745:(e,t,a)=>{"use strict";a.d(t,{bq:()=>m,eb:()=>h,gC:()=>f,l6:()=>o,yv:()=>u});var r=a(95155),l=a(12115),s=a(63409),n=a(32645),i=a(52488),c=a(27193),d=a(29602);let o=s.bL;s.YJ;let u=s.WT,m=l.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,r.jsxs)(s.l9,{ref:t,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[l,(0,r.jsx)(s.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=s.l9.displayName;let g=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(s.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});g.displayName=s.PP.displayName;let p=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(s.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=s.wn.displayName;let f=l.forwardRef((e,t)=>{let{className:a,children:l,position:n="popper",...i}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsxs)(s.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,r.jsx)(g,{}),(0,r.jsx)(s.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,r.jsx)(p,{})]})})});f.displayName=s.UC.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(s.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",a),...l})}).displayName=s.JU.displayName;let h=l.forwardRef((e,t)=>{let{className:a,children:l,...n}=e;return(0,r.jsxs)(s.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.VF,{children:(0,r.jsx)(c.A,{className:"h-4 w-4"})})}),(0,r.jsx)(s.p4,{children:l})]})});h.displayName=s.q7.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(s.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=s.wv.displayName},29602:(e,t,a)=>{"use strict";a.d(t,{$g:()=>n,QH:()=>c,Vi:()=>m,Yq:()=>i,cV:()=>d,cn:()=>s,dw:()=>u,gI:()=>o,oE:()=>g});var r=a(43463),l=a(69795);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,l.QP)((0,r.$)(t))}let n=e=>e.toLocaleString("en-US",{style:"currency",currency:"VND",currencyDisplay:"code"});function i(e){return new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}).format(e)}function c(e){let t=e;for(let e of[{regex:/HEADLINE<([^>]+)>/g,replace:'<h1 class="text-2xl font-bold mb-4">$1</h1>'},{regex:/SECTION<([^>]+)>/g,replace:'<h2 class="text-lg font-bold mb-2">$1</h2>'},{regex:/LINK<([^,]+),\s*([^>]+)>/g,replace:'<a href="$2" class="text-black hover:text-slate-500 underline">$1</a>'},{regex:/IMG<([^,]+),\s*([^,]+)(?:,\s*(\d+))?(?:,\s*(\d+))?>/g,replace:(e,t,a,r,l)=>'<div class="w-full flex justify-center items-center">\n            <Image src="'.concat(a,'" alt="').concat(t,'" ').concat(r?'width="'.concat(r,'"'):""," ").concat(l?'height="'.concat(l,'"'):"",' class="rounded-lg" /></div>')},{regex:/P<([^>]+)>/g,replace:(e,t)=>{let a=t.split(/\n/).map(e=>e.trim()).join("<br/>");return'<p class="text-base text-black">'.concat(a,"</p>")}}])t=t.replace(e.regex,e.replace);return'<div class="w-full flex flex-col justify-center items-start">'.concat(t,"</div>")}let d=async e=>{let t=new FormData;t.append("file",e),t.append("upload_preset","yxg1dfzu");try{let e=await fetch("https://api.cloudinary.com/v1_1/".concat("dgwujcdba","/image/upload"),{method:"POST",body:t}),a=await e.json();if(a.secure_url)return a.secure_url;return console.error("Cloudinary error response:",a),{error:"Invalid response from Cloudinary"}}catch(e){return console.error("Upload error:",e),{error:"Upload error"}}};function o(e,t,a){let r=new Date;if("col"===a){let a=[];for(let l=t;l>=0;l--){let t=new Date(r);t.setDate(r.getDate()-l);let s=t.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),n=e.filter(e=>{let a=new Date(e.createdAt);return a.getDate()===t.getDate()&&a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear()});a.push({date:s,total:n.length})}return a}{let a={completed:0,pending:0,cancelled:0},l=new Date(r);return l.setDate(r.getDate()-t),e.forEach(e=>{let t=new Date(e.createdAt);t>=l&&t<=r&&(a[e.status]=(a[e.status]||0)+1)}),Object.entries(a).map(e=>{let[t,a]=e;return{status:t,total:a}})}}function u(e,t){let a=new Date,r=[];for(let l=t;l>=0;l--){let t=new Date(a);t.setDate(a.getDate()-l);let s=t.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),n=e.filter(e=>{let a=new Date(e.joinAt);return a.getDate()===t.getDate()&&a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear()});r.push({date:s,total:n.length})}return r}function m(e,t){let a=new Date,r=[];for(let l=t;l>=0;l--){let t=new Date(a);t.setDate(a.getDate()-l);let s=t.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),n=e.filter(e=>{let a=new Date(e.createdAt);return a.getDate()===t.getDate()&&a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear()}).reduce((e,t)=>e+("completed"===t.status?t.total:0),0);r.push({date:s,total:n/1e3})}return r}function g(e,t,a){let r=new Date,l=[];for(let s=a;s>=0;s--){let a=new Date(r);a.setDate(r.getDate()-s);let n=a.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),i=e.filter(e=>{let t=new Date(e.createdAt);return t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()&&t.getFullYear()===a.getFullYear()}),c=t.filter(e=>{let t=new Date(e.joinAt);return t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()&&t.getFullYear()===a.getFullYear()}),d=i.reduce((e,t)=>e+("completed"===t.status?t.total:0),0);l.push({date:n,totalOrder:i.length,totalRevenue:d/1e7,totalUser:c.length})}return l}},25012:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(14057).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},15325:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(14057).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},80368:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(14057).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[2651,1345,1359,1080,914,9895,1868,6412,4066,8441,1517,7358],()=>t(39520)),_N_E=e.O()}]);