"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7974],{48538:(e,t,r)=>{r.d(t,{A:()=>u});var a=r(95155),s=r(5565),o=r(8209),i=r(4683),c=r(689),n=r(14085),d=r(35007),l=r(29602);function u(e){let{product:t,onRemove:r,updateQuantity:u,index:m}=e,f=e=>{u(m,Math.max(1,t.quantity+e))};return(0,a.jsx)(d.Zp,{className:"w-full",children:(0,a.jsx)(d.Wu,{className:"p-4 w-full",children:(0,a.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,a.jsxs)("div",{className:"flex justify-start items-center space-x-4 w-full",children:[(0,a.jsx)("div",{className:"relative w-20 h-20",children:(0,a.jsx)(s.default,{src:t.productImage,alt:t.productName,layout:"fill",objectFit:"cover",className:"rounded-md"})}),(0,a.jsxs)("div",{className:"flex flex-col justify-start items-start",children:[(0,a.jsxs)("p",{className:"font-bold text-lg",children:[t.quantity," x ",t.productName]}),(0,a.jsxs)("p",{className:"text-muted-foreground text-sm",children:["Size: ",t.size,", Color: ",t.color]}),t.productPrice&&(0,a.jsx)("p",{className:"font-semibold",children:(0,l.$g)(t.productPrice)}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,a.jsx)(n.$,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>f(-1),children:(0,a.jsx)(o.A,{className:"h-4 w-4"})}),(0,a.jsx)("span",{className:"font-medium",children:t.quantity}),(0,a.jsx)(n.$,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>f(1),children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})]})]})]}),(0,a.jsxs)(n.$,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-foreground",onClick:()=>r(m),children:[(0,a.jsx)(c.A,{className:"h-10 w-10"}),(0,a.jsx)("span",{className:"sr-only",children:"Remove item"})]})]})})})}},14085:(e,t,r)=>{r.d(t,{$:()=>d,r:()=>n});var a=r(95155),s=r(12115),o=r(12317),i=r(31027),c=r(29602);let n=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...l}=e,u=d?o.DX:"button";return(0,a.jsx)(u,{className:(0,c.cn)(n({variant:s,size:i,className:r})),ref:t,...l})});d.displayName="Button"},35007:(e,t,r)=>{r.d(t,{BT:()=>d,Wu:()=>l,ZB:()=>n,Zp:()=>i,aR:()=>c,wL:()=>u});var a=r(95155),s=r(12115),o=r(29602);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});i.displayName="Card";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r),...s})});c.displayName="CardHeader";let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("font-semibold leading-none tracking-tight",r),...s})});n.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",r),...s})});l.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},89282:(e,t,r)=>{r.d(t,{Separator:()=>c});var a=r(95155),s=r(12115),o=r(90434),i=r(29602);let c=s.forwardRef((e,t)=>{let{className:r,orientation:s="horizontal",decorative:c=!0,...n}=e;return(0,a.jsx)(o.b,{ref:t,decorative:c,orientation:s,className:(0,i.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",r),...n})});c.displayName=o.b.displayName},61584:(e,t,r)=>{r.d(t,{_:()=>l,default:()=>m});var a=r(95155),s=r(12115),o=r(20241),i=r(80839),c=r(35408);let n=(0,s.createContext)(void 0),d={quantity:1},l=()=>{let e=(0,s.useContext)(n);if(!e)throw Error("useCart must be used within a CartProvider");return e},u="cart",m=e=>{let{children:t}=e,{isLoggedIn:r,user:l}=(0,i.A)(),[m,f]=(0,s.useState)([]),[p,h]=(0,s.useState)(!1),{toast:v}=(0,o.dj)();return((0,s.useEffect)(()=>{if(!p)try{let e=localStorage.getItem(u);if(e){let t=JSON.parse(e);Array.isArray(t)&&f(t)}}catch(e){console.error("Error loading cart from localStorage:",e)}finally{h(!0)}},[]),(0,s.useEffect)(()=>{if(!p)return;let e=setTimeout(()=>{try{localStorage.setItem(u,JSON.stringify(m))}catch(e){console.error("Error saving cart to localStorage:",e),v({title:"Error saving cart",description:"Your cart changes might not persist after page refresh",variant:"destructive"})}r&&(null==l?void 0:l.userId)&&m.length>0&&(0,c.iH)(l.userId.toString(),m).catch(e=>{console.error("Error updating cart in backend:",e),v({title:"Error updating cart",description:"Failed to sync cart with server",variant:"destructive"})})},300);return()=>clearTimeout(e)},[m,p,r,null==l?void 0:l.userId]),(0,s.useEffect)(()=>{p&&r&&(null==l?void 0:l.userId)&&Array.isArray(l.cart)&&l.cart.length>0&&f(e=>{let t=new Map(e.map(e=>["".concat(e.productId,"-").concat(e.color,"-").concat(e.size),e])),r=[...e],a=!1;return l.cart.forEach(e=>{let s="".concat(e.productId,"-").concat(e.color,"-").concat(e.size),o=t.get(s);if(o){if(o.quantity!==e.quantity){let t=r.findIndex(t=>t.productId===e.productId&&t.color===e.color&&t.size===e.size);-1!==t&&(r[t]={...o,quantity:o.quantity+e.quantity},a=!0)}}else r.push(e),a=!0}),a?r:e})},[p,r,null==l?void 0:l.userId,null==l?void 0:l.cart]),p)?(0,a.jsx)(n.Provider,{value:{test:"test",cart:m,addToCart:e=>{try{if(!e.productId)throw Error("Product ID is required");f(t=>{let r=t.findIndex(t=>t.productId===e.productId&&t.color===e.color&&t.size===e.size);if(r>=0){let a=[...t];return a[r]={...a[r],quantity:a[r].quantity+(e.quantity||d.quantity)},a}{let r={...d,...e,productId:e.productId,productName:e.productName,productImage:e.productImage,productPrice:e.productPrice,size:e.size,color:e.color};return[...t,r]}}),v({title:"Item added to cart",description:"Item added to cart successfully",variant:"default",className:"bg-sub border-none"})}catch(e){console.error("Error adding item to cart:",e),v({title:"Error adding item to cart",description:"An error occurred while adding item to cart",variant:"destructive"})}},removeFromCart:e=>{try{f(t=>{let r=[...t];return r.splice(e,1),r}),v({title:"Item removed from cart",description:"Item removed from cart successfully",variant:"destructive"})}catch(e){console.error("Error removing item from cart:",e)}},updateQuantity:(e,t)=>{try{f(r=>r.map((r,a)=>e===a?{...r,quantity:Math.max(1,t)}:r)),v({title:"Quantity updated",description:"Quantity updated successfully",variant:"default",className:"bg-main border-none"})}catch(e){console.error("Error updating quantity:",e)}},updateOrderDetails:(e,t)=>{try{f(r=>r.map(r=>r.productId===e?{...r,...t}:r))}catch(e){console.error("Error updating order details:",e)}},clearCart:()=>{try{f([]),localStorage.removeItem(u)}catch(e){console.error("Error clearing cart:",e)}},clearCartUser:()=>{try{f([]),localStorage.removeItem(u),r&&l&&(0,c.iH)(l.userId.toString(),[])}catch(e){console.error("Error clearing cart:",e)}},getCartTotal:()=>m.reduce((e,t)=>e+t.quantity,0)},children:t}):null}},20241:(e,t,r)=>{r.d(t,{dj:()=>m});var a=r(12115);let s=0,o=new Map,i=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},c=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},n=[],d={toasts:[]};function l(e){d=c(d,e),n.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>l({type:"DISMISS_TOAST",toastId:r});return l({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=a.useState(d);return a.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}}}]);