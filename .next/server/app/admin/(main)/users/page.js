(()=>{var e={};e.id=1176,e.ids=[1176],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},71793:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>i});var a=t(70260),s=t(28203),o=t(25155),n=t.n(o),d=t(67292),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);t.d(r,l);let i=["",{children:["admin",{children:["(main)",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,35244)),"W:\\web\\shop-co3049-fe\\app\\admin\\(main)\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9540)),"W:\\web\\shop-co3049-fe\\app\\admin\\(main)\\layout.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,19611)),"W:\\web\\shop-co3049-fe\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["W:\\web\\shop-co3049-fe\\app\\admin\\(main)\\users\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/admin/(main)/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},4203:(e,r,t)=>{Promise.resolve().then(t.bind(t,35244))},3523:(e,r,t)=>{Promise.resolve().then(t.bind(t,57544))},57544:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h});var a=t(45512),s=t(58009),o=t(57138),n=t(74152),d=t(24751),l=t(13393),i=t(25409),c=t(54069),u=t(45610),p=t(59462),m=t(79334);let h=()=>{let[e,r]=(0,s.useState)([]),[t,h]=(0,s.useState)([]),[x,f]=(0,s.useState)([]),[g,j]=(0,s.useState)([]),[b,y]=(0,s.useState)(""),[v,w]=(0,s.useState)("joinAt"),[N,A]=(0,s.useState)("all"),[I,P]=(0,s.useState)(1),[R,q]=(0,s.useState)(1),C=(0,m.useRouter)();(0,s.useEffect)(()=>{(0,o.CF)().then(e=>{if("error"in e){console.error(e.error);return}console.log("Users:",e),r(e)}),(0,n.Vd)().then(e=>{if("error"in e){console.error(e.error);return}console.log("Orders:",e),h(e)}),(0,d.zu)().then(e=>{if("error"in e){console.error(e.error);return}console.log("Reviews:",e),f(e)})},[]),(0,s.useEffect)(()=>{let r=e.map(e=>{let r=t.filter(r=>Number(r.userId)===Number(e.userId)),a=x.filter(r=>Number(r.userId)===Number(e.userId));return{userId:e.userId,name:e.name,joinAt:e.joinAt,numOrders:r.length,numReviews:a.length,totalOrderPayment:r.reduce((e,r)=>e+("completed"==r.status?r.total:0),0),status:e.status}});j(r),q(Math.ceil(r.length/50))},[e,t,x]);let k=g.filter(e=>(e.userId.toString().includes(b)||e.name?.toLowerCase().includes(b.toLowerCase()))&&("all"===N||e.status===N)).sort((e,r)=>"joinAt"===v?new Date(r.joinAt).getTime()-new Date(e.joinAt).getTime():"totalPayment"===v?r.totalOrderPayment-e.totalOrderPayment:"totalOrder"===v?r.numOrders-e.numOrders:"totalReview"===v?r.numReviews-e.numReviews:0).slice((I-1)*50,50*I);return(0,a.jsxs)("div",{className:"container mx-auto p-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"User Management"}),(0,a.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,a.jsx)(i.p,{placeholder:"Search by User ID or Name",value:b,onChange:e=>y(e.target.value),className:"max-w-sm"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(c.l6,{value:v,onValueChange:w,children:[(0,a.jsx)(c.bq,{className:"w-[180px]",children:(0,a.jsx)(c.yv,{placeholder:"Sort by"})}),(0,a.jsxs)(c.gC,{children:[(0,a.jsx)(c.eb,{value:"joinAt",children:"Join Date"}),(0,a.jsx)(c.eb,{value:"totalPayment",children:"Total Payment"}),(0,a.jsx)(c.eb,{value:"totalOrder",children:"Total Orders"}),(0,a.jsx)(c.eb,{value:"totalReview",children:"Total Reviews"})]})]}),(0,a.jsxs)(c.l6,{value:N,onValueChange:A,children:[(0,a.jsx)(c.bq,{className:"w-[180px]",children:(0,a.jsx)(c.yv,{placeholder:"Filter by Status"})}),(0,a.jsxs)(c.gC,{children:[(0,a.jsx)(c.eb,{value:"all",children:"All"}),(0,a.jsx)(c.eb,{value:"active",children:"Active"}),(0,a.jsx)(c.eb,{value:"banned",children:"Banned"})]})]})]})]}),(0,a.jsxs)(l.XI,{children:[(0,a.jsx)(l.A0,{children:(0,a.jsxs)(l.Hj,{children:[(0,a.jsx)(l.nd,{children:"User ID"}),(0,a.jsx)(l.nd,{children:"Name"}),(0,a.jsx)(l.nd,{children:"Join Date"}),(0,a.jsx)(l.nd,{children:"Orders"}),(0,a.jsx)(l.nd,{children:"Reviews"}),(0,a.jsx)(l.nd,{children:"Total Payment"}),(0,a.jsx)(l.nd,{children:"Status"})]})}),(0,a.jsx)(l.BF,{children:k.map(e=>(0,a.jsxs)(l.Hj,{onClick:()=>C.push(`/admin/users/${e.userId}`),className:"cursor-pointer",children:[(0,a.jsx)(l.nA,{children:e.userId}),(0,a.jsx)(l.nA,{children:e.name}),(0,a.jsx)(l.nA,{children:new Date(e.joinAt).toLocaleDateString()}),(0,a.jsx)(l.nA,{children:e.numOrders}),(0,a.jsx)(l.nA,{children:e.numReviews}),(0,a.jsx)(l.nA,{children:(0,p.$g)(e.totalOrderPayment)}),(0,a.jsx)(l.nA,{children:e.status})]},e.userId))})]}),(0,a.jsx)(u.dK,{className:"mt-4",children:(0,a.jsxs)(u.Iu,{children:[(0,a.jsx)(u.cU,{children:(0,a.jsx)(u.Eb,{onClick:()=>P(e=>Math.max(e-1,1)),isActive:1!==I})}),[...Array(R)].map((e,r)=>(0,a.jsx)(u.cU,{children:(0,a.jsx)(u.n$,{onClick:()=>P(r+1),isActive:I===r+1,children:r+1})},r)),(0,a.jsx)(u.cU,{children:(0,a.jsx)(u.WA,{onClick:()=>P(e=>Math.min(e+1,R)),isActive:I!==R})})]})})]})}},45610:(e,r,t)=>{"use strict";t.d(r,{dK:()=>c,Iu:()=>u,cU:()=>p,n$:()=>m,WA:()=>x,Eb:()=>h});var a=t(45512),s=t(58009),o=t(94825);let n=(0,o.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var d=t(86967);(0,o.A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var l=t(59462),i=t(87021);let c=({className:e,...r})=>(0,a.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,l.cn)("mx-auto flex w-full justify-center",e),...r});c.displayName="Pagination";let u=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("ul",{ref:t,className:(0,l.cn)("flex flex-row items-center gap-1",e),...r}));u.displayName="PaginationContent";let p=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("li",{ref:t,className:(0,l.cn)("",e),...r}));p.displayName="PaginationItem";let m=({className:e,isActive:r,size:t="icon",...s})=>(0,a.jsx)("a",{"aria-current":r?"page":void 0,className:(0,l.cn)((0,i.r)({variant:r?"outline":"ghost",size:t}),e),...s});m.displayName="PaginationLink";let h=({className:e,...r})=>(0,a.jsxs)(m,{"aria-label":"Go to previous page",size:"default",className:(0,l.cn)("gap-1 pl-2.5",e),...r,children:[(0,a.jsx)(n,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Previous"})]});h.displayName="PaginationPrevious";let x=({className:e,...r})=>(0,a.jsxs)(m,{"aria-label":"Go to next page",size:"default",className:(0,l.cn)("gap-1 pr-2.5",e),...r,children:[(0,a.jsx)("span",{children:"Next"}),(0,a.jsx)(d.A,{className:"h-4 w-4"})]});x.displayName="PaginationNext"},54069:(e,r,t)=>{"use strict";t.d(r,{bq:()=>p,eb:()=>f,gC:()=>x,l6:()=>c,yv:()=>u});var a=t(45512),s=t(58009),o=t(81477),n=t(7833),d=t(36624),l=t(24999),i=t(59462);let c=o.bL;o.YJ;let u=o.WT,p=s.forwardRef(({className:e,children:r,...t},s)=>(0,a.jsxs)(o.l9,{ref:s,className:(0,i.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[r,(0,a.jsx)(o.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=o.l9.displayName;let m=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)(o.PP,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:(0,a.jsx)(d.A,{className:"h-4 w-4"})}));m.displayName=o.PP.displayName;let h=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)(o.wn,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})}));h.displayName=o.wn.displayName;let x=s.forwardRef(({className:e,children:r,position:t="popper",...s},n)=>(0,a.jsx)(o.ZL,{children:(0,a.jsxs)(o.UC,{ref:n,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...s,children:[(0,a.jsx)(m,{}),(0,a.jsx)(o.LM,{className:(0,i.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(h,{})]})}));x.displayName=o.UC.displayName,s.forwardRef(({className:e,...r},t)=>(0,a.jsx)(o.JU,{ref:t,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",e),...r})).displayName=o.JU.displayName;let f=s.forwardRef(({className:e,children:r,...t},s)=>(0,a.jsxs)(o.q7,{ref:s,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(o.VF,{children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})}),(0,a.jsx)(o.p4,{children:r})]}));f.displayName=o.q7.displayName,s.forwardRef(({className:e,...r},t)=>(0,a.jsx)(o.wv,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",e),...r})).displayName=o.wv.displayName},13393:(e,r,t)=>{"use strict";t.d(r,{A0:()=>d,BF:()=>l,Hj:()=>i,XI:()=>n,nA:()=>u,nd:()=>c});var a=t(45512),s=t(58009),o=t(59462);let n=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,o.cn)("w-full caption-bottom text-sm",e),...r})}));n.displayName="Table";let d=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("thead",{ref:t,className:(0,o.cn)("[&_tr]:border-b",e),...r}));d.displayName="TableHeader";let l=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("tbody",{ref:t,className:(0,o.cn)("[&_tr:last-child]:border-0",e),...r}));l.displayName="TableBody",s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("tfoot",{ref:t,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";let i=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("tr",{ref:t,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...r}));i.displayName="TableRow";let c=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("th",{ref:t,className:(0,o.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r}));c.displayName="TableHead";let u=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("td",{ref:t,className:(0,o.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r}));u.displayName="TableCell",s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("caption",{ref:t,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",e),...r})).displayName="TableCaption"},74152:(e,r,t)=>{"use strict";t.d(r,{Kv:()=>l,RL:()=>n,Vd:()=>o,fS:()=>d,xo:()=>s});var a=t(79828);let s=async e=>{try{let r=await a.A.get(`api/order/routes.php?userId=${e}`);console.log("Backend Response:",r.data);let t=[];return r.data.length>0&&(t=r.data.map(e=>({orderId:e.orderId,products:e.products.map(e=>({productId:e.productId,quantity:e.quantity,color:e.color,size:e.size,productName:e.productName,productImage:e.productImage,productPrice:e.productPrice})),status:e.status,createdAt:e.createdAt,completedAt:e.completedAt,userId:e.userId,phone_number:e.phone_number,address:e.address,total:Number(e.total),name:e.name}))),t}catch(e){return console.error("Error fetching orders:",e),{error:"Error fetching orders"}}},o=async()=>{try{let e=await a.A.get("api/order/routes.php");return console.log("Backend Response:",e.data),e.data.map(e=>({orderId:e.orderId,products:e.products.map(e=>({productId:e.productId,quantity:e.quantity,color:e.color,size:e.size,productName:e.productName,productImage:e.productImage,productPrice:e.productPrice})),status:e.status,createdAt:e.createdAt,completedAt:e.completedAt,userId:e.userId,phone_number:e.phone_number,address:e.address,total:Number(e.total),name:e.name}))}catch(e){return console.log("Error fetching orders:",e),{error:"Error fetching orders"}}},n=async e=>{try{let r=await a.A.get(`api/order/routes.php?orderId=${e}`);return console.log("Backend Response:",r.data),{orderId:r.data.orderId,products:r.data.products.map(e=>({productId:e.productId,quantity:e.quantity,color:e.color,size:e.size,productName:e.productName,productImage:e.productImage,productPrice:e.productPrice})),status:r.data.status,createdAt:r.data.createdAt,completedAt:r.data.completedAt,userId:r.data.userId,phone_number:r.data.phone_number,address:r.data.address,total:Number(r.data.total),name:r.data.name}}catch(e){return console.log("Error fetching orders:",e),{error:"Error fetching orders"}}},d=async e=>{try{let r=await a.A.post("api/order/routes.php",e);return console.log("Backend Response:",r.data),{orderId:r.data.orderId}}catch(e){return console.log("Error creating order:",e),{error:"Error creating order"}}},l=async(e,r)=>{try{let t=await a.A.put(`api/order/routes.php?orderId=${e}&status=${r}`);return console.log("Backend Response:",t.data),{message:t.data.message}}catch(e){return console.log("Error updating order status:",e),{error:"Error updating order status"}}}},35244:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"W:\\\\web\\\\shop-co3049-fe\\\\app\\\\admin\\\\(main)\\\\users\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"W:\\web\\shop-co3049-fe\\app\\admin\\(main)\\users\\page.tsx","default")},29374:(e,r,t)=>{"use strict";function a(e,[r,t]){return Math.min(t,Math.max(r,e))}t.d(r,{q:()=>a})},59018:(e,r,t)=>{"use strict";t.d(r,{jH:()=>o});var a=t(58009);t(45512);var s=a.createContext(void 0);function o(e){let r=a.useContext(s);return e||r||"ltr"}},24999:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(94825).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},86967:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(94825).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[638,9798,7180,4388,9749,1220,6107,72],()=>t(71793));module.exports=a})();